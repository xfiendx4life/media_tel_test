# Тестовое задание

Необходимо разработать сервис социальных связей.
На входе имеется журнал коммуникаций между пользователями. Необходимо строить граф социальных связей по этому журналу.

__Это должен быть HTTP REST сервис, в нотации json.__

__Необходимы следующие методы:__
- добавление записи факта коммуникации
- получение графа социальных связей, при этом граф должен содержать не только структуру по узлам и ребрам, но и иметь раздел со сводной информацией по количествам коммуникаций между пользователями (минимальное, максимальное, среднее)

Результат должен быть оформлен как репозиторий в git, сопровожден краткой инструкцией по установке и настройке.

## Выполнение

Граф реализован в виде списка смежности. В узле которого находится имя участника общения, и список его контактов, с которыми он общался.

Так как общение с обним и тем же обонентом могло происхдить не единожды, то список состоит из объектов `{name: "value", num: value}`, где Name - имя субъекта общения, num - количество интеракций. 

[__Описание REST сервиса по стандарту open api__](./api/api.yml)

### Добавление факта записи коммуникации
Запись о коммуникации двусторонняя, поэтому факты коммуникации - массивы состоящие из двух строк. 
```json
[
  [
    "string",
    "string"
  ]
]
```

Добавление реализовано в массиве, таким образом можно добавить сразу несколько актов коммуникации. 

Добавление производится по ендпоинту `/coms/add` методом POST, пример добавления с использованием curl:

```sh
curl -H "Content_Type: application/json" -X POST localhost:8000/add -d '[["M","K"],["P","L"],["M","P"],["M","K"]]'
```

### Получение графа социальных связей

Получение графа социальных связей осуществляется по ендпоинту `/graph`. Пример запроса и ответа спомощью curl:
```sh
curl localhost:8000/graph
```
```json
{
    "graph":
    {
        "K":[{"name":"M","num":2}],
        "L":[{"name":"P","num":1}],
        "M":[{"name":"K","num":2},{"name":"P","num":1}],
        "P":[{"name":"L","num":1},{"name":"M","num":1}]
    },
    "info":
    {
        "minComs":1,
        "maxComs":3,
        "average":2
    }
}
```
В полученной информации есть 2 раздела:

1. Собственно граф (список смежности)
2. Инфо - информация о минимальном, максимальном количестве актов связи и среднем на человека.

## Особенности реализации
Для реализации api использоваласб библиотека [`Echo`](https://echo.labstack.com/) - есть опыт работы с ней + ускоряет разработку.

### Навигация по проекту
* [Сервер](./cmd/server/echo.go)
* [Хэндлеры](./pkg/delivery/graph.go)
* [Основная логика](./pkg/usecase/graph.go)
* [Описание моделей](./pkg/models/graph.go)

Ко всем модулям написаны небольшие тесты для проверки работоспособности модуля.

## Запуск

Приложение читает порт, на котором работает из переменной окружения `PORT`, поэтому запустить можно из корня проекта:
```sh
PORT=8000 go run ./cmd/mediatest/main.go
```
Или воспользоваться `make`:
```sh
make run
```
Во втором случае сервис запустится на порту `8000`, но можно поменять значение переменной в [Makefile](./Makefile)